<%- include('../partials/header') %>

<div class="container">
    <h2>Recipe List</h2>
    <table>
        <thead>
            <tr>
                <th>Name</th>
    
                <th>Description</th>
                <th>Total Cook Time</th>
            </tr>
        </thead>
        <tbody>
            <% recipes.forEach(function(r) { %>
                    <tr>
                        <td><a href="/recipes/<%= r._id %>"><%= r.name %></a></td>
                        <td><%= r.description %></td>
                        <% let totalCookTime = r.prepTime + r.cookTime %>
                        <td><%= totalCookTime %> mins</td>
                        <td class="delete-cell">
                            <% if (user?._id.equals(r.user)) { %>
                                <form action="/recipes/<%= r._id %>?_method=DELETE" method="POST" class="delete-form">
                                    <button type="submit"><img src="/images/trash-can.png" alt=""></button>
                                </form>
                            <% } %>
                        </td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    </div>
    
    <%- include('../partials/footer') %>